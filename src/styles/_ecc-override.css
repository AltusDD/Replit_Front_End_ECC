:root {
  --ecc-bg: #0f1216;
  --ecc-panel: #121316;
  --ecc-border: rgba(255, 255, 255, .06);
  --ecc-sidebar-w: 280px;
  --ecc-sidebar-w-collapsed: 68px;
  --ecc-radius: 12px;
  --ecc-padding: 12px;
}

.ecc-sidebar {
  width: 280px; 
  background: #0f1216; 
  transition: width .18s ease; 
  position: relative;
}

.ecc--collapsed.ecc-sidebar { width: 68px; }
.ecc-sidebar__inner { height: 100%; padding: 12px; display: flex; flex-direction: column; gap: 12px; }
.ecc-logo { height: 28px; object-fit: contain; filter: drop-shadow(0 1px 0 rgba(0,0,0,.25)); }
.ecc-sidebar__brand { display: flex; align-items: center; justify-content: space-between; padding: 6px 8px; }
.ecc-pin { background: transparent; border: 0; color: #cfcfcf; cursor: pointer; }

.ecc-group { position: relative; padding: 8px; border-radius: 12px; }
.ecc-group__title { display:flex; align-items:center; gap:.5rem; color:#dcdcdc; opacity:.9; font-weight:600; padding:2px 8px 8px; }
.ecc-group__icon { width: 16px; height:16px; opacity:.8; }

.ecc-group__list { display: grid; gap: 4px; }
.ecc-link { display:flex; align-items:center; gap:.625rem; padding:.5rem .75rem; border-radius:.75rem; color:#c8d0d8; border:1px solid transparent; }
.ecc-link:hover { background: rgba(255,255,255,.04); border-color: rgba(255,255,255,.06); }
.ecc-link.is-active { outline:2px solid #ffc658; color:#fff; }
.ecc-link__icon { width:18px; height:18px; opacity:.85; }

.ecc--collapsed .ecc-group__title,
.ecc--collapsed .ecc-group__list .ecc-link__label { display: none; }
.ecc--collapsed .ecc-group__list { display:none; }
.ecc--collapsed .ecc-link { justify-content:center; padding:.5rem; }

.ecc-flyout { display:none; position:absolute; left:72px; top:8px; background:#0f1216; border:1px solid rgba(255,255,255,.08); padding:8px; border-radius:12px; min-width:220px; z-index:30; box-shadow:0 8px 24px rgba(0,0,0,.35); }
.ecc--collapsed .ecc-group:hover .ecc-flyout { display:block; }
.ecc-flyout__header { font-weight:600; color:#e9e9e9; margin:4px 8px 8px; }
.ecc-flyout__list { display:grid; gap:4px; }

.ecc-collapse { margin-top:auto; padding:8px; }

/* Reserve body padding once the sidebar mounts */
html[data-sidebar-mounted="1"] body {
padding-left: var(--ecc-sidepad, var(--ecc-sidebar-w)) !important;
box-sizing: border-box;
}

/* Canonical rail */
.sidebar {
position: fixed; inset: 0 auto 0 0;
width: var(--ecc-sidebar-w);
background: var(--ecc-bg);
border-right: 1px solid var(--ecc-seam);
z-index: 50;
display: flex; flex-direction: column; gap: 8px;
color: var(--ecc-text);
}
.sidebar .topbar { display:flex; align-items:center; justify-content:flex-end; padding: 10px 12px 0; }
.sidebar .pin { background: transparent; border: 1px solid var(--ecc-seam); color: var(--ecc-text); border-radius: 12px; padding: 4px 10px; cursor: pointer; }

.sidebar .sidebar-scroll {
height: calc(100vh - 40px);
overflow-y: auto;
padding: 10px 12px 16px;
scrollbar-width: none;
}
.sidebar .sidebar-scroll::-webkit-scrollbar { width: 0; height: 0; }

.sidebar .section { margin: 10px 0 14px; }
.sidebar .section-title { font-size: 12px; letter-spacing: .08em; color: #a3a7b3; margin: 8px 6px 8px; text-transform: uppercase; }
.sidebar .section-items { display: flex; flex-direction: column; gap: 4px; }

.sidebar .row { display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius: 12px; }
.sidebar .row:hover { background: rgba(255,255,255,0.04); }
.sidebar .row.active { outline: 2px solid #ffd40066; }
.sidebar .row .icon { flex: 0 0 auto; }
.sidebar .icon.parent { color: var(--ecc-gold) !important; }
.sidebar .icon.child { color: var(--ecc-dim) !important; }
.sidebar .children { margin-left: 8px; display: flex; flex-direction: column; gap: 4px; }

/* Collapsed = icon-only */
.sidebar.collapsed { width: var(--ecc-sidebar-w-collapsed); }
.sidebar.collapsed .section-title,
.sidebar.collapsed .label,
.sidebar.collapsed .pin { display: none !important; }
.sidebar .expand {
position: absolute; bottom: 16px; left: 16px; width: 36px; height: 36px;
border-radius: 999px; border: 1px solid var(--ecc-seam); background: var(--ecc-panel); color: var(--ecc-text);
display: flex; align-items: center; justify-content: center; cursor: pointer;
}
.sidebar:not(.collapsed) .expand { display:none; }

/* Hover flyout (overlay; no layout shift) */
.sidebar .flyout {
position: absolute !important;
top: 0;
left: calc(var(--ecc-sidebar-w-collapsed) - 2px);
height: 100vh;
max-width: var(--ecc-flyout-w);
background: var(--ecc-bg);
border-right: 1px solid var(--ecc-seam);
z-index: 60;
display: none; opacity: 0; transform: translateX(-8px);
pointer-events: none;
transition: opacity .18s, transform .18s;
}
.sidebar .flyout.show { display: block; opacity: 1; transform: translateX(0); pointer-events: auto; }
.sidebar:not(.collapsed) .flyout { display: none !important; }

/* Kill visited link colors inside sidebar */
.sidebar a, .sidebar a:link, .sidebar a:visited, .sidebar a:active {
color: var(--ecc-text) !important;
text-decoration: none !important;
}

/* Hide legacy/duplicate rails */
.sidebar:not([data-ecc="primary"]) { display: none !important; }