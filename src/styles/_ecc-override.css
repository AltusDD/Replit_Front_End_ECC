:root {
  --ecc-bg: #0e0f11;
  --ecc-panel: #121316;
  --ecc-border: #222428;
  --ecc-text: #d7d9dd;
  --ecc-mut: #94a3b8;
  --ecc-gold: #ffd400;
  --ecc-sidebar-w: 280px;
  --ecc-sidebar-w-collapsed: 72px;
  --ecc-radius: 12px;
  --ecc-padding: 12px;
}

/* Reserve body padding once the sidebar mounts */
html[data-sidebar-mounted="1"] body {
padding-left: var(--ecc-sidepad, var(--ecc-sidebar-w)) !important;
box-sizing: border-box;
}

/* Canonical rail */
.sidebar {
position: fixed; inset: 0 auto 0 0;
width: var(--ecc-sidebar-w);
background: var(--ecc-bg);
border-right: 1px solid var(--ecc-seam);
z-index: 50;
display: flex; flex-direction: column; gap: 8px;
color: var(--ecc-text);
}
.sidebar .topbar { display:flex; align-items:center; justify-content:flex-end; padding: 10px 12px 0; }
.sidebar .pin { background: transparent; border: 1px solid var(--ecc-seam); color: var(--ecc-text); border-radius: 12px; padding: 4px 10px; cursor: pointer; }

.sidebar .sidebar-scroll {
height: calc(100vh - 40px);
overflow-y: auto;
padding: 10px 12px 16px;
scrollbar-width: none;
}
.sidebar .sidebar-scroll::-webkit-scrollbar { width: 0; height: 0; }

.sidebar .section { margin: 10px 0 14px; }
.sidebar .section-title { font-size: 12px; letter-spacing: .08em; color: #a3a7b3; margin: 8px 6px 8px; text-transform: uppercase; }
.sidebar .section-items { display: flex; flex-direction: column; gap: 4px; }

.sidebar .row { display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius: 12px; }
.sidebar .row:hover { background: rgba(255,255,255,0.04); }
.sidebar .row.active { outline: 2px solid #ffd40066; }
.sidebar .row .icon { flex: 0 0 auto; }
.sidebar .icon.parent { color: var(--ecc-gold) !important; }
.sidebar .icon.child { color: var(--ecc-dim) !important; }
.sidebar .children { margin-left: 8px; display: flex; flex-direction: column; gap: 4px; }

/* Collapsed = icon-only */
.sidebar.collapsed { width: var(--ecc-sidebar-w-collapsed); }
.sidebar.collapsed .section-title,
.sidebar.collapsed .label,
.sidebar.collapsed .pin { display: none !important; }
.sidebar .expand {
position: absolute; bottom: 16px; left: 16px; width: 36px; height: 36px;
border-radius: 999px; border: 1px solid var(--ecc-seam); background: var(--ecc-panel); color: var(--ecc-text);
display: flex; align-items: center; justify-content: center; cursor: pointer;
}
.sidebar:not(.collapsed) .expand { display:none; }

/* Hover flyout (overlay; no layout shift) */
.sidebar .flyout {
position: absolute !important;
top: 0;
left: calc(var(--ecc-sidebar-w-collapsed) - 2px);
height: 100vh;
max-width: var(--ecc-flyout-w);
background: var(--ecc-bg);
border-right: 1px solid var(--ecc-seam);
z-index: 60;
display: none; opacity: 0; transform: translateX(-8px);
pointer-events: none;
transition: opacity .18s, transform .18s;
}
.sidebar .flyout.show { display: block; opacity: 1; transform: translateX(0); pointer-events: auto; }
.sidebar:not(.collapsed) .flyout { display: none !important; }

/* Kill visited link colors inside sidebar */
.sidebar a, .sidebar a:link, .sidebar a:visited, .sidebar a:active {
color: var(--ecc-text) !important;
text-decoration: none !important;
}

/* Hide legacy/duplicate rails */
.sidebar:not([data-ecc="primary"]) { display: none !important; }