/* === ECC SIDEBAR POLISH (router-agnostic) ================================= */

/* True black rail so it matches the page */
.sidebar, [data-role="sidebar"] { background: var(--bg) !important; }

/* Independent scroll; NO visible scrollbar */
.sidebar-scroll{ height:100vh; overflow-y:auto; -webkit-overflow-scrolling:touch; overscroll-behavior:contain; scrollbar-width:none; }
.sidebar-scroll::-webkit-scrollbar{ display:none; }

/* Brand/logo: bright, crisp; keep full logo in flyout and collapsed */
.sidebar .brand img, .sidebar .brand .brand-logo{
  display:block; max-width:180px; max-height:64px; object-fit:contain;
  filter: brightness(1.12) drop-shadow(0 0 8px rgba(255,215,0,.16));
}
.sidebar.collapsed .brand img, .sidebar.collapsed .brand .brand-logo{
  max-width:64px; max-height:64px; margin:0 auto;
}

/* Row grid = icon | label | chevron (prevents left "scoot") */
:root{ --nav-icon:18px; --nav-gap:10px; --nav-pad-x:12px; }

.sidebar .nav-item, .sidebar .group-row, .sidebar .leaf{
  display:grid;
  grid-template-columns: var(--nav-icon) minmax(0,1fr) auto;
  align-items:center; column-gap:var(--nav-gap);
  padding:8px var(--nav-pad-x);
}
.sidebar .nav-item .label, .sidebar .group-row .lbl, .sidebar .leaf .lbl{
  margin:0 !important; text-indent:0 !important; min-width:0;
}

/* Collapsed = icon-only WITHOUT shifting content area */
.sidebar.collapsed .nav-item, .sidebar.collapsed .group-row, .sidebar.collapsed .leaf{
  grid-template-columns: var(--nav-icon); justify-items:center;
}
.sidebar.collapsed .nav-item > :not(:first-child),
.sidebar.collapsed .group-row > :not(:first-child),
.sidebar.collapsed .leaf     > :not(:first-child){
  visibility:hidden; width:0; overflow:hidden; white-space:nowrap;
}

/* Flyout on hover: restore full grid */
.sidebar.collapsed:hover .nav-item, .sidebar.collapsed:hover .group-row, .sidebar.collapsed:hover .leaf{
  grid-template-columns: var(--nav-icon) minmax(0,1fr) auto; justify-items:start; padding:8px var(--nav-pad-x);
}
.sidebar.collapsed:hover .nav-item > :not(:first-child),
.sidebar.collapsed:hover .group-row > :not(:first-child),
.sidebar.collapsed:hover .leaf     > :not(:first-child){
  visibility:visible; width:auto; overflow:visible;
}

/* Active state: dark chip + gold ring, fully readable */
.leaf.active, [aria-current="page"].leaf, .nav-item.active{
  background:#17181a; box-shadow: inset 0 0 0 2px var(--gold); border-radius:12px;
}

/* Hide pin button when collapsed to keep a clean rail */
.sidebar.collapsed .pinBtn{ display:none !important; }
