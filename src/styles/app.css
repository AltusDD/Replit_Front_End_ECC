/* =========================================================
   ECC â€” App Shell + Sidebar + Flyout
   ========================================================= */

/* Base */
*,
*::before,
*::after { box-sizing: border-box; }
* { margin: 0; }
html, body, #root { height: 100%; }
a { color: inherit; text-decoration: none; }
button { background: transparent; border: 0; padding: 0; cursor: pointer; color: inherit; font: inherit; }
:focus-visible { box-shadow: var(--focus); }

/* Shell */
.ecc-shell { display:flex; height:100dvh; width:100%; background:var(--bg); color:var(--text); }
.ecc-main { flex:1 1 auto; min-width:0; overflow:auto; padding:16px 18px; background:var(--bg); position:relative; z-index:1; }
.ecc-page-title { font-size:22px; font-weight:900; letter-spacing:.2px; margin:8px 0 12px; }

/* Tokens used here */
:root{
  --rail-collapsed: 64px;
  --rail-expanded: 320px;
  --z-sidebar: 9000;
  --z-flyout: 10000;

  --nav-bg: var(--surface);
  --nav-fg: var(--text);
  --nav-active: var(--gold);

  --hover-bg: rgba(247, 201, 72, 0.12);
  --sub-hover-bg: rgba(247, 201, 72, 0.08);
}

/* Sidebar */
.ecc-sidebar{
  width:var(--rail-expanded);
  background:var(--nav-bg);
  border-right:1px solid var(--border);
  color:var(--nav-fg);
  transform:translateZ(0);
  z-index:var(--z-sidebar);
  display:flex; flex-direction:column;
}
.ecc-sidebar.is-collapsed{ width:var(--rail-collapsed); }

/* Header (logo only) */
.ecc-header{
  position:sticky; top:0;
  display:flex; align-items:center;
  gap:8px;
  height:56px; padding:0 8px;
  border-bottom:1px solid var(--border);
  background:var(--surface);
  z-index:calc(var(--z-sidebar) + 1);
}
.ecc-logo{
  width:28px; height:28px; border-radius:6px;
  background:var(--gold); color:#0b0f14;
  display:grid; place-items:center; font-weight:700; font-size:12px;
}
.ecc-logo-img{ width:28px; height:28px; object-fit:contain; filter:brightness(1.2) contrast(1.05); }
.ecc-logo-wide{ height:24px; object-fit:contain; filter:brightness(1.2) contrast(1.05); }
.ecc-title{ font-size:13px; font-weight:600; }

/* Footer (PIN lives here) */
.ecc-footer{
  position:sticky; bottom:0;
  margin-top:auto;
  padding:8px;
  border-top:1px solid var(--border);
  background:var(--surface);
  display:flex; justify-content:center; align-items:center;
}
.ecc-pin{
  display:inline-grid; grid-auto-flow:column; align-items:center; gap:8px;
  min-width:44px; height:36px; padding:0 12px;
  border-radius:10px; border:1px solid var(--border);
  background:rgba(247,201,72,0.08); color:var(--text);
  transition:background 150ms var(--ease), border-color 120ms var(--ease), transform 120ms var(--ease);
}
.ecc-pin:hover{ background:rgba(247,201,72,0.22); border-color:var(--gold); transform:translateY(-1px); }
.ecc-pin.is-on{ background:var(--gold); color:#0b0f14; border-color:var(--gold); }
.ecc-pin.is-on:hover{ background:#E2B33C; border-color:#E2B33C; }
.ecc-pin-label{ font-size:12px; font-weight:700; }

.ecc-scroll{ flex:1 1 auto; overflow-y:auto; overflow-x:hidden; padding:8px 6px 10px; }
.ecc-scroll::-webkit-scrollbar{ width:8px; }
.ecc-scroll::-webkit-scrollbar-thumb{ background:transparent; }
.ecc-scroll:hover::-webkit-scrollbar-thumb{ background:var(--border); }

/* Rows */
.ecc-row{ position:relative; margin:2px 4px; border-radius:10px; }
.ecc-row-inner{
  display:grid; grid-template-columns:40px 1fr auto;
  align-items:center; min-height:40px; padding:4px 8px; border-radius:10px;
}
.ecc-row:hover .ecc-row-inner{ background:var(--hover-bg); }
.ecc-row.is-active .ecc-icon{ color:var(--nav-active); }
.ecc-row.is-active .ecc-label{ color:var(--text); font-weight:600; }

.ecc-icon-wrap{ display:grid; place-items:center; color:var(--nav-active); }
.ecc-icon{ display:block; }

.ecc-label{
  display:inline-flex; align-items:center;
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
  color:var(--text-muted); padding-right:8px;
}
.ecc-label:hover{ color:var(--text); }
.ecc-caret{ justify-self:end; color:var(--text-subtle); display:grid; place-items:center; }
.ecc-spacer{ flex:1 1 auto; }
.ecc-badge{
  display:inline-grid; place-items:center;
  min-width:20px; height:20px; padding:0 6px;
  font-size:11px; line-height:1; color:#0B0F14;
  background:var(--nav-active); border-radius:999px;
}
.ecc-badge.small{ min-width:18px; height:18px; font-size:10px; }

/* Children */
.ecc-children{ padding:4px 8px 8px 40px; display:grid; gap:4px; }
.ecc-child{
  display:grid; grid-template-columns:16px 1fr auto; align-items:center;
  min-height:28px; column-gap:8px; border-radius:8px; padding:2px 6px; color:var(--text-muted);
}
.ecc-child:hover{ background:var(--sub-hover-bg); color:var(--text); }
.ecc-child.is-active{ color:var(--text); font-weight:600; }
.ecc-child-icon{ color:var(--text-subtle); }
.ecc-child-label{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* Collapsed hides labels/children */
.ecc-sidebar.is-collapsed .ecc-title,
.ecc-sidebar.is-collapsed .ecc-label,
.ecc-sidebar.is-collapsed .ecc-children,
.ecc-sidebar.is-collapsed .ecc-badge:not(.small){ display:none; }

/* Flyout */
.ecc-flyout{
  position:fixed; max-height:calc(100dvh - 16px); overflow:auto;
  width:288px; padding:8px; background:var(--surface); border:1px solid var(--border);
  border-radius:12px; box-shadow:var(--shadow-2); z-index:var(--z-flyout); pointer-events:auto;
}
.ecc-flyout::-webkit-scrollbar{ width:8px; }
.ecc-flyout::-webkit-scrollbar-thumb{ background:var(--border); }
.ecc-flyout-head{
  display:grid; grid-template-columns:16px 1fr; gap:8px; align-items:center;
  padding:6px 8px 8px; border-bottom:1px solid var(--border); margin:-8px -8px 8px -8px;
}
.ecc-flyout-head-icon{ color:var(--nav-active); }
.ecc-flyout-head-title{ font-weight:700; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.ecc-flyout-item{
  display:grid; grid-template-columns:16px 1fr auto; align-items:center; column-gap:8px;
  min-height:36px; padding:6px 8px; border-radius:8px; color:var(--text-muted);
}
.ecc-flyout-item:hover{ background:var(--hover-bg); color:var(--text); }
.ecc-flyout-icon{ color:var(--text-subtle); }
.ecc-flyout-label{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* Panels / Tables */
.panel{ background:var(--surface); border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow-1); }
.table{ width:100%; background:var(--surface); border:1px solid var(--border); border-radius:12px; border-collapse:separate; border-spacing:0; }
.table thead th{ text-align:left; font-weight:600; color:var(--text-subtle); padding:10px 12px; border-bottom:1px solid var(--border); }
.table tbody td{ padding:10px 12px; color:var(--text); border-top:1px solid var(--border); }
.table tbody tr:hover{ background: rgba(247,201,72,0.06); }

/* ====== ECC portfolio page scaffolding ====== */
.ecc-page { padding: 16px; }
.ecc-page-head {
  display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px;
}
.ecc-page-title { margin: 0; font-size: 20px; font-weight: 900; color: var(--text); }
.ecc-page-tools { display: flex; align-items: center; gap: 8px; }

.ecc-search {
  width: 280px; max-width: 42vw;
  background: var(--surface); color: var(--text);
  border: 1px solid var(--border); border-radius: var(--radius-md);
  padding: 8px 10px;
}
.ecc-search::placeholder { color: var(--muted-1, #98a2b3); }

.ecc-btn { padding: 8px 12px; border-radius: var(--radius-md); border: 1px solid var(--border); background: var(--surface); color: var(--text); }
.ecc-btn-gold { background: var(--gold); border-color: var(--gold); color: #0b0f14; font-weight: 700; }

.ecc-table-wrap { border: 1px solid var(--border); border-radius: var(--radius-lg); overflow: hidden; background: #0b0f14; }
.ecc-table { width: 100%; border-collapse: collapse; }
.ecc-table th {
  text-align: left; font-weight: 800; color: var(--text);
  padding: 10px; border-bottom: 1px solid var(--border); background: color-mix(in srgb, var(--gold) 6%, var(--surface));
}
.ecc-table td { padding: 10px; border-bottom: 1px solid var(--border); color: var(--text); }
.ecc-table tr:hover td { background: color-mix(in srgb, var(--gold) 5%, var(--surface)); }
.ecc-table-empty { text-align: center; color: var(--muted-1, #98a2b3); padding: 26px 10px; }
