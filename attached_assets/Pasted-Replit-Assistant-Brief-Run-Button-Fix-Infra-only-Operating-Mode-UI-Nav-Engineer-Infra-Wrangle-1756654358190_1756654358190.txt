Replit Assistant Brief — Run Button Fix (Infra-only)

Operating Mode: UI-Nav Engineer, Infra Wrangler
Guardrails:

Do not modify any app files except those listed below.

Do not touch src/components/** or any CSS besides the file explicitly mentioned (none in this brief).

Goal is only to make the Run button start Vite on port 5000.

Files You May Touch

.replit

package.json (scripts section only)

vite.config.ts (create only if missing)

replit.nix (create only if missing)

Backup

If .replit or vite.config.ts already exist, save a copy as *.bak before changes.

Exact Changeset

package.json → scripts
Ensure these exist (create or overwrite only these keys):

{
  "scripts": {
    "dev": "vite --host --port 5000",
    "build": "vite build",
    "preview": "vite preview --host --port 5000"
  }
}


.replit
Create or replace with exactly:

run = "npm run dev"
hidden = [".cache", ".vite", "dist", "node_modules"]


vite.config.ts (only if missing)
If the project does not already have a Vite config, create this file:

import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";

export default defineConfig({
  plugins: [react()],
  server: { host: true, port: 5000, strictPort: true },
  preview: { host: true, port: 5000, strictPort: true },
});


replit.nix (only if missing)
Create:

{ pkgs }: {
  deps = [
    pkgs.nodejs_20
  ];
}


Start cleanly

Kill any stray dev server, then start:

In Shell (internal): pkill -f vite || true

Click Run (Replit should now execute npm run dev from .replit).

Verification Checklist

Vite banner appears in console with port 5000 and host: true.

Public Replit URL loads the app (no sidebar/layout edits were made).

If Run button doesn’t pick up immediately:

Click Stop once, then Run again.

Do Not Touch

Any files under src/components/**

Any CSS under src/styles/**

Routing libs or app code

If anything fails, return the console output of npm run dev and the contents of .replit and the "scripts" section of package.json.