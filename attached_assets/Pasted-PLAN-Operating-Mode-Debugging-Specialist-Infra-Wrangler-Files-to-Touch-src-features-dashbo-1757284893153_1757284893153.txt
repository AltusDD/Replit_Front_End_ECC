PLAN
Operating Mode: Debugging Specialist, Infra Wrangler
Files to Touch: 
- `src/features/dashboard/hooks/useDashboardData.ts`
Guardrails: 
- The data transformation logic **must** be refactored to strictly follow the field names and foreign key relationships defined in the "DoorLoop API - Relationships.docx" blueprint.
- Do not modify any UI components. The UI is correct; the data being fed to it is wrong.

CHANGESET
- **File: `src/features/dashboard/hooks/useDashboardData.ts`**
  1.  **Fix Unit-Lease Matching (Priority #1):**
      - [cite_start]Per the blueprint, the correct relationship is between the `units.id` (Primary Key) and `leases.unit_id` (Foreign Key)[cite: 164, 165].
      - Rewrite the Occupancy calculation logic to match units to leases where `unit.id` is equal to `lease.unitDbId` (or the equivalent integer foreign key from the lease API response). This will fix the Occupancy and Rent Ready KPIs.

  2.  **Fix Collections Calculation:**
      - [cite_start]Per the blueprint, payments come from the `/lease-payments` endpoint and have an `amountReceived` field[cite: 201, 202]. [cite_start]Charges come from `/lease-charges` and have an `amount` field[cite: 208, 209].
      - Update the collections logic to sum the correct fields from the correct data sources to calculate "Billed" vs. "Receipts" for the current month.

  3.  **Fix Priority Action Feed Logic:**
      - [cite_start]**Delinquency Alerts:** Per the blueprint, leases have a `totalBalanceDue` field[cite: 189]. Filter for leases where `totalBalanceDue` is greater than zero to generate the delinquency list.
      - [cite_start]**Lease Renewals:** Per the blueprint, leases have an `end_date`[cite: 189]. Filter for active leases where the `end_date` is within the next 45 days.

  4.  **Handle Missing Map Coordinates:**
      - This logic is correct. Continue to check for `latitude`/`longitude` on each property, log a warning if they are missing, and return an empty `mapData` array.

VERIFICATION CHECKLIST
- The Occupancy calculation is now correct, using the `unit.id` to `lease.unit_id` integer match.
- The dashboard's KPI cards for Occupancy, Rent Ready, and Collections MTD now display **correct, non-zero values**.
- The Priority Action Feed is now correctly populated with delinquent tenants and upcoming lease renewals based on the blueprint's logic.
- The "➡️ Transformed Data for UI" console log shows correctly populated data for `kpiData` and `feedData`.
- The map remains empty, and the console continues to show warnings for missing coordinates, which is the expected behavior.