Replit Fix Prompt ‚Äî ‚ÄúPortfolio V3: Close Audit Gaps (STRICT)‚Äù

ROLE
You are applying 3 precise, low-risk fixes identified by our audit. You must only do what‚Äôs specified below.

HARD GUARDRAILS (do not violate):

Make only the changes listed here.

Do not refactor, reformat, or auto-organize imports globally.

Do not change styles, theme tokens, or DataTable behavior.

Preserve file headers, comments, exports, and types unless explicitly shown.

‚úÖ Task 1 ‚Äî Bold COMPANY on Owners table

File: src/pages/portfolio/columns.tsx
Goal: COMPANY column renders bold text (Genesis spec).

Locate the Owners column config block (typically OWNERS_COLUMNS or similar).

Find the column object with key: "company".

Replace that one column object with this exact version (shape compatible with existing table API):

{
  key: "company",
  header: "COMPANY",
  type: "text",
  filter: "text",
  sort: "text",
  render: (_v: any, r: any) => <strong>{r.company ?? ""}</strong>
}


Do not modify any other columns in this file.

‚úÖ Task 2 ‚Äî StatusTag: map ‚Äúinactive‚Äù to RED (bad)

File: src/features/portfolio/components/StatusTag.tsx
Goal: Keep current API + classes, but ensure ‚Äúinactive‚Äù is treated as bad (red).

Open the file and keep the component name, props, and export as they are.

Replace only the status‚Üíclass mapping logic so it matches this exact logic:

// Inside StatusTag component, after normalizing the value:
const v = String(value ?? "").trim().toLowerCase();

// Semantic groups (keep class names as your project uses them)
const good = new Set(["active", "occupied", "ok", "true", "yes", "current", "paid", "on_time"]);
const warn = new Set(["pending", "hold", "warn", "warning", "processing", "unknown"]);
const bad  = new Set(["ended", "vacant", "inactive", "false", "no", "delinquent", "past_due", "overdue", "litigation", "bad"]);

// Default base class
let cls = "ecc-badge";
if (good.has(v)) cls += " ecc-badge--ok";
else if (warn.has(v)) cls += " ecc-badge--warn";
else if (bad.has(v)) cls += " ecc-badge--bad";
else cls += " ecc-badge--muted"; // keep whatever your neutral class is; if none, leave just ecc-badge


Do not change the JSX wrapper, outer return, or className prop names. Only update the grouping logic so ‚Äúinactive‚Äù falls into the bad set.

‚úÖ Task 3 ‚Äî Rename utils/format.tsx ‚Üí utils/format.ts

Goal: Utils file has no JSX; extension should be .ts.

If the file exists as src/utils/format.tsx, rename it to src/utils/format.ts.

Search the codebase for imports that explicitly include .tsx and fix them to import without extension (preferred) or with .ts if the project requires it. Examples to fix:

from "../../utils/format.tsx" ‚Üí from "../../utils/format"

from "../../../utils/format.tsx" ‚Üí from "../../../utils/format"

Do not alter any function bodies (we rely on money, percent, shortDate, and any non-JSX helpers as-is).

üîç Verification (must run)

Typecheck & build

npm run typecheck (or pnpm typecheck / yarn typecheck)

npm run build (or your project‚Äôs build script)

Dev smoke

Start dev server and open these pages:

/portfolio/properties

/portfolio/units

/portfolio/leases

/portfolio/tenants

/portfolio/owners

Owners table: visually confirm COMPANY cells render bold.

Any row that shows ‚Äúinactive‚Äù via StatusTag renders with red/bad style.

No console errors or TypeScript errors related to format imports.

No regression checks (must stay unchanged):

Theme (Altus black/gold), zebra rows, sticky headers.

Filters, sorts, number alignment, progress bars.

Double-click row navigation and pagination options [25, 50, 100, 200].

KPI cards computed from the same dataset as the table.

üßæ Output

Post back in chat:

A short diff summary (files changed + lines touched).

2 screenshots: Owners table (bold COMPANY) and an entity showing inactive as red.

A one-line confirmation that all five routes load with no errors.

Then create a single commit:

git add -A
git commit -m "Portfolio V3: close audit gaps (bold COMPANY, inactive‚Üíbad, format.tsx‚Üí.ts) ‚Äì no other changes"


Do not push if your environment is configured to auto-deploy; just show the clean commit.

Begin.